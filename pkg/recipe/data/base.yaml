kind: recipeMetadata
apiVersion: cns.nvidia.com/v1alpha1
metadata:
  name: base

spec:
  # Basic assumptions - will create warning in pre-flight but not block deployment
  # Constraint names use fully qualified measurement paths: {type}.{subtype}.{key}
  constraints:
    - name: K8s.server.version
      value: ">= 1.25"

  componentRefs:
    - name: cert-manager
      type: Helm
      source: https://charts.jetstack.io
      version: v1.17.2
      valuesFile: components/cert-manager/values.yaml

    - name: gpu-operator
      type: Helm
      source: https://helm.ngc.nvidia.com/nvidia
      version: v25.10.1
      valuesFile: components/gpu-operator/values.yaml
      manifestFiles:
        - components/gpu-operator/manifests/dcgm-exporter.yaml
      dependencyRefs:
        - cert-manager

    - name: nvsentinel
      type: Helm
      source: oci://ghcr.io/nvidia
      version: v0.6.0
      valuesFile: components/nvsentinel/values.yaml
      dependencyRefs:
        - cert-manager

    - name: skyhook-operator
      type: Helm
      source: https://helm.ngc.nvidia.com/nvidia/skyhook
      version: 0.11.1
      valuesFile: components/skyhook-operator/values.yaml

    - name: prometheus
      type: Helm
      source: https://prometheus-community.github.io/helm-charts
      version: 81.2.2
      valuesFile: components/prometheus/values.yaml
