# Copyright (c) 2025, NVIDIA CORPORATION.  All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# GPU Operator Helm values
# Base configuration for all deployments

operator:
  upgradeCRD: true
  resources:
    limits:
      cpu: 500m
      memory: 700Mi
    requests:
      cpu: 200m
      memory: 300Mi

dcgm:
  enabled: true

toolkit:
  enabled: true
  env:
  - name: ACCEPT_NVIDIA_VISIBLE_DEVICES_ENVVAR_WHEN_UNPRIVILEGED
    value: "false"
  - name: ACCEPT_NVIDIA_VISIBLE_DEVICES_AS_VOLUME_MOUNTS
    value: "true"

dcgmExporter:
  serviceMonitor:
    enabled: true
    interval: 60s
  config:
    name: "dcgm-exporter"
    create: true

gdrcopy:
  enabled: true
  version: v2.5

gfd:
  enabled: true

driver:
  version: 580.105.08
  enabled: true
  useOpenKernelModules: true
  kernelModuleConfig:
    name: "kernel-module-params"
  maxParallelUpgrades: 5
  rdma:
    enabled: true

devicePlugin:
  env:
    - name: DP_DISABLE_HEALTHCHECKS
      value: "109"
    - name: DEVICE_LIST_STRATEGY
      value: volume-mounts

migManager:
  enabled: true
