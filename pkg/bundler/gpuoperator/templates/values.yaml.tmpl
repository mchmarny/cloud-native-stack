# GPU Operator Helm Values
# Generated from Cloud Native Stack Recipe
# Timestamp: {{ .Timestamp }}
# Version: {{ .Version }}

operator:
  {{- if .DriverRegistry.Context }}
  # {{ .DriverRegistry.Context }}
  {{- end }}
  repository: {{ .DriverRegistry.Value }}
  {{- if .GPUOperatorVersion.Value }}
  {{- if .GPUOperatorVersion.Context }}
  # {{ .GPUOperatorVersion.Context }}
  {{- end }}
  version: {{ .GPUOperatorVersion.Value }}
  {{- end }}

driver:
  {{- if .EnableDriver.Context }}
  # {{ .EnableDriver.Context }}
  {{- end }}
  enabled: {{ .EnableDriver.Value }}
  {{- if .DriverVersion.Value }}
  {{- if .DriverVersion.Context }}
  # {{ .DriverVersion.Context }}
  {{- end }}
  version: "{{ .DriverVersion.Value }}"
  {{- end }}
  {{- if .UseOpenKernelModule.Value }}
  {{- if .UseOpenKernelModule.Context }}
  # {{ .UseOpenKernelModule.Context }}
  {{- end }}
  useOpenKernelModules: true
  {{- end }}
  {{- if .DriverRegistry.Context }}
  # {{ .DriverRegistry.Context }}
  {{- end }}
  repository: {{ .DriverRegistry.Value }}

toolkit:
  enabled: true
  {{- if .NvidiaContainerToolkitVersion.Value }}
  {{- if .NvidiaContainerToolkitVersion.Context }}
  # {{ .NvidiaContainerToolkitVersion.Context }}
  {{- end }}
  version: {{ .NvidiaContainerToolkitVersion.Value }}
  {{- end }}

devicePlugin:
  enabled: true
  {{- if .DevicePluginVersion.Value }}
  {{- if .DevicePluginVersion.Context }}
  # {{ .DevicePluginVersion.Context }}
  {{- end }}
  version: {{ .DevicePluginVersion.Value }}
  {{- end }}

dcgm:
  enabled: true
  {{- if .DCGMVersion.Value }}
  {{- if .DCGMVersion.Context }}
  # {{ .DCGMVersion.Context }}
  {{- end }}
  version: {{ .DCGMVersion.Value }}
  {{- end }}

dcgmExporter:
  enabled: true
  {{- if .DCGMExporterVersion.Value }}
  {{- if .DCGMExporterVersion.Context }}
  # {{ .DCGMExporterVersion.Context }}
  {{- end }}
  version: {{ .DCGMExporterVersion.Value }}
  {{- end }}

{{- if .MIGStrategy.Context }}
# {{ .MIGStrategy.Context }}
{{- end }}
mig:
  strategy: {{ .MIGStrategy.Value }}

{{- if .EnableGDS.Context }}
# {{ .EnableGDS.Context }}
{{- end }}
gds:
  enabled: {{ .EnableGDS.Value }}

{{- if .VGPULicenseServer.Value }}
{{- if .VGPULicenseServer.Context }}
# {{ .VGPULicenseServer.Context }}
{{- end }}
vgpuManager:
  enabled: true
  licenseServerURL: {{ .VGPULicenseServer.Value }}
{{- end }}

{{- if .EnableSecureBoot.Value }}
{{- if .EnableSecureBoot.Context }}
# {{ .EnableSecureBoot.Context }}
{{- end }}
sandboxWorkloads:
  enabled: true
  defaultWorkload: container
{{- end }}

{{- if .CustomLabels }}
nodeSelector:
  {{- range $key, $value := .CustomLabels }}
  {{ $key }}: {{ $value }}
  {{- end }}
{{- end }}

{{- if .Namespace }}
namespace: {{ .Namespace }}
{{- end }}
